{% extends "base.html.twig" %}

{% block head %}
	{{ parent() }}
	{% if gamePlayer != game.currentPlayer %}
		<meta http-equiv="refresh" content="5">
	{% endif %}
{% endblock %}

{% block body %}


	<div class="opponent">

		{{ include('board.html.twig', {opponent_ships_sunk: opponent_ships_sunk, shoots: shoots, hits: hits, triggers: triggers}, with_context = false) }}

		<div>
			<div class="opponent-fleet-status">
				<h1>{{gamePlayer.name}}</h1>

				<div>
					{% if gamePlayer == game.currentPlayer %}
						<h3 style="color: green;">
							{{ "Your Turn"|trans|upper }}
						</h3>
					{% else %}
						<h3 style="color: orange;">
							{% trans %}Waiting for your opponent{% endtrans %}:
						</h3>
					{% endif %}
				</div>

				{% for msg in app.session.flashBag.get('shoot_result') %}
					{{ msg }}
				{% endfor %}

				{% for ship in opponent_ships %}
					<div class="ship">
						{% for coordinate in ship.coordinates %}
							{% if match_coordinate(coordinate, shoots) %}
								<div class="part hit"></div>
							{% else %}
								<div class="part"></div>
							{% endif %}
						{% endfor %}
					</div>
				{% endfor %}
			</div>

			<div>
				{{ form_start(abandon_form) }}
				{{ form_widget(abandon_form.save, { 'label': 'Abandon Game' }) }}
				{{ form_end(abandon_form) }}
			</div>
		</div>

	</div>

	{{ include('board.html.twig', {ships: ships}, with_context = false) }}

{% endblock %}
